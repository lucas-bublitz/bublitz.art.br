
<script>
  const scriptURL = 
  const IPINFO_TOKEN = 'd268ed2ce5d46a'; 
  const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz59Z961eQMiP7HqBJfyh94snD_C-If71wmKUm7s2KaAx_AK9_HcMsfVaO1p9zWAAtj/exec';

  async function logVisit() {
    if (sessionStorage.getItem('visit_logged')) return;

    try {
      const response = await fetch(`https://ipinfo.io/json?token=${IPINFO_TOKEN}`);
      const data = await response.json();

      const payload = {
        data_hora: new Date().toLocaleString("pt-BR"),
        ip: data.ip,
        cidade: data.city,
        estado: data.region,
        pais: data.country,
        provedor: data.org, 
        url: window.location.href,
        agente: navigator.userAgent
      };

      await fetch(GOOGLE_SCRIPT_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(payload)
      });

      sessionStorage.setItem('visit_logged', 'true');
      console.log('Visita registrada.');

    } catch (error) {
      console.error('Erro no rastreador:', error);
    }
  }
  
  window.addEventListener('load', logVisit);
</script>